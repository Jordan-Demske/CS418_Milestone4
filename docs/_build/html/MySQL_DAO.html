
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>MySQL_DAO module &#8212; CS418_Milestone_4  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="test_dao module" href="test_dao.html" />
    <link rel="prev" title="CS418_Milestone4" href="modules.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-MySQL_DAO">
<span id="mysql-dao-module"></span><h1>MySQL_DAO module<a class="headerlink" href="#module-MySQL_DAO" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="MySQL_DAO.MySQLConnectionManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">MySQL_DAO.</span></span><span class="sig-name descname"><span class="pre">MySQLConnectionManager</span></span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQLConnectionManager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQLConnectionManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class MySQLConnectionManager
Creates the connection based on a config file</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="MySQL_DAO.MySQLConnectionManager.config_file">
<span class="sig-name descname"><span class="pre">config_file</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'connection_data.conf'</span></em><a class="headerlink" href="#MySQL_DAO.MySQLConnectionManager.config_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="MySQL_DAO.MySQLCursorManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">MySQL_DAO.</span></span><span class="sig-name descname"><span class="pre">MySQLCursorManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cnx</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQLCursorManager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQLCursorManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class MySQLCursorManager
Handles the connection’s cursor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cnx</strong> (<a class="reference internal" href="#MySQL_DAO.MySQLConnectionManager" title="MySQL_DAO.MySQLConnectionManager"><em>MySQLConnectionManager</em></a>) – The Connection</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">MySQL_DAO.</span></span><span class="sig-name descname"><span class="pre">MySQL_DAO</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stub</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class DAO
The DAO part of the TMB</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>is_stub</strong> (<em>bool</em>) – Optional, whether the DAO is a test stub or not</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.ais_parameters">
<span class="sig-name descname"><span class="pre">ais_parameters</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['Class',</span> <span class="pre">'MMSI']</span></em><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.ais_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.create_port_document">
<span class="sig-name descname"><span class="pre">create_port_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">port</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.create_port_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.create_port_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Query 2, Priority 2
From a dictionary filled with message values, insert the values into the database and return a success message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>port</strong> (<em>dict</em>) – A dictionary of port values to put into the document</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary containing the port’s Id, Name, Country, Latitude, Longitude, and all three tile ids</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.create_tile_document">
<span class="sig-name descname"><span class="pre">create_tile_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tile</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.create_tile_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.create_tile_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Based on a list of tile values, create a dictionary of said tile values with their keys</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tile</strong> (<em>list</em>) – The list of tile values</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary containing all keys for a tile and the values of the specific tile passed in</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.create_vessel_document">
<span class="sig-name descname"><span class="pre">create_vessel_document</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vessel</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.create_vessel_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.create_vessel_document" title="Permalink to this definition">¶</a></dt>
<dd><p>From a list of vessel values, return a dictionary with the MMSI, Latitude, Longitude, Name, and IMO</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vessel</strong> (<em>list</em>) – A list of vessel values</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary containing {‘MMSI’: …, ‘lat’: …,} with the values of the vessel</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.delete_ais_messages">
<span class="sig-name descname"><span class="pre">delete_ais_messages</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.delete_ais_messages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.delete_ais_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes all AIS Messages. Used for testing.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the connection fails</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>JSON string containing {‘success’: …} with either 1 or 0 depending on the success of the insert</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.delete_old_ais_messages">
<span class="sig-name descname"><span class="pre">delete_old_ais_messages</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.delete_old_ais_messages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.delete_old_ais_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Query 3, Priority 1
Deletes all AIS Messages older than five minutes.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the connection fails</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>JSON string containing {‘deletions’: …} with the number of deletions</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.format_ais_message">
<span class="sig-name descname"><span class="pre">format_ais_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.format_ais_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.format_ais_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats an AIS Message to show the Class, MMSI, IMO, and Timestamp.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> (<em>dict</em>) – a dict consisting of a list of attributes for the message</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>object {‘Class’: … , ‘MMSI’: … , } describing the AIS Message</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.format_position_report">
<span class="sig-name descname"><span class="pre">format_position_report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.format_position_report"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.format_position_report" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats a Position Report to show the RoT, SoG, CoG, Heading, Status, and Position.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> (<em>dict</em>) – a dict consisting of a list of attributes for the report</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>object {‘RoT’: … , ‘SoG’: … , } describing the Position Report</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.format_static_data">
<span class="sig-name descname"><span class="pre">format_static_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.format_static_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.format_static_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats a Static Data message to show the CallSign, Name, VesselType, CargoType, Length, Breadth, Draught,
Destination, DestinationId, and ETA.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> (<em>dict</em>) – a dict consisting of a list of attributes for the static data message</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>object {‘CallSign’: … , ‘Name’: … , } describing the Static Data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.get_optional_vessel_data">
<span class="sig-name descname"><span class="pre">get_optional_vessel_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mmsi</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.get_optional_vessel_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.get_optional_vessel_data" title="Permalink to this definition">¶</a></dt>
<dd><p>From a vessel’s MMSI, return the IMO and name first from testing the transient data and then relying on the
permanent data if no such transient data exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mmsi</strong> (<em>dict</em>) – A dictionary of values to insert</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the connection fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>List consisting of the IMO followed by the name</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.get_tile">
<span class="sig-name descname"><span class="pre">get_tile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scale</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lat</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.get_tile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.get_tile" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the boundaries of tile of scale 2 or 3 that contains the given position.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scale</strong> (<em>int</em>) – zoom level (2 or 3)</p></li>
<li><p><strong>long</strong> (<em>float</em>) – longitude</p></li>
<li><p><strong>lat</strong> (<em>float</em>) – latitude</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>object {‘south’: … , ‘north’: … , } describing the boundaries of the containing tile</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.get_vessel_imo">
<span class="sig-name descname"><span class="pre">get_vessel_imo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mmsi</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.get_vessel_imo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.get_vessel_imo" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the permanent data’s IMO for a ship with a given MMSI</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mmsi</strong> (<em>int</em>) – The vessel MMSI</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the connection fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The IMO</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.get_vessel_name">
<span class="sig-name descname"><span class="pre">get_vessel_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mmsi</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.get_vessel_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.get_vessel_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the Name of a vessel found in the permanent data based on a given MMSI</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mmsi</strong> (<em>int</em>) – The Vessel MMSI</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the connection fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The vessel name</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.given_tile_find_contained_tiles">
<span class="sig-name descname"><span class="pre">given_tile_find_contained_tiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map_tile_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.given_tile_find_contained_tiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.given_tile_find_contained_tiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Query 13, Priority 4
Return the four map tile documents of the tiles contained within the tile whose Id is passed in</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>map_tile_id</strong> (<em>str</em>) – The Id of a map tile</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the connection fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Either a JSON string containing {‘vessels’: [{‘MMSI’: …, ‘lat’: …, ‘long’: …, ‘IMO’: …}, …]}
or a an array of objects containing the port’s Id, Name, Country, Latitude, Longitude, and all three tile
ids</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.given_tile_id_get_tile">
<span class="sig-name descname"><span class="pre">given_tile_id_get_tile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">map_tile_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.given_tile_id_get_tile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.given_tile_id_get_tile" title="Permalink to this definition">¶</a></dt>
<dd><p>Query 14, Priority 4
Return the actual tile (a PNG file), the binary data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>map_tile_id</strong> (<em>str</em>) – The Id of a map tile</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the connection fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Either a JSON string containing {‘vessels’: [{‘MMSI’: …, ‘lat’: …, ‘long’: …, ‘IMO’: …}, …]}
or a an array of objects containing the port’s Id, Name, Country, Latitude, Longitude, and all three tile
ids</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.insert_ais_batch">
<span class="sig-name descname"><span class="pre">insert_ais_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.insert_ais_batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.insert_ais_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Query 1, Priority 1
From a set of JSON data, inserts every AIS Message into the database and returns the number of insertions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> (<em>str</em>) – a json string</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the JSON cannot be loaded correctly</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>JSON string containing {‘inserts’: …} with the count of insertions</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.insert_ais_message">
<span class="sig-name descname"><span class="pre">insert_ais_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.insert_ais_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.insert_ais_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Query 2, Priority 2
From a dictionary filled with message values, insert the values into the database and return a success message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msg</strong> (<em>dict</em>) – A dictionary of values to insert</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the connection fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>JSON string containing {‘success’: …} with either 1 or 0 depending on the success of the insert</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.position_parameters">
<span class="sig-name descname"><span class="pre">position_parameters</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['type',</span> <span class="pre">'coordinates']</span></em><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.position_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.position_report_parameters">
<span class="sig-name descname"><span class="pre">position_report_parameters</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['RoT',</span> <span class="pre">'SoG',</span> <span class="pre">'CoG',</span> <span class="pre">'Heading']</span></em><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.position_report_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.read_all_matching_ports">
<span class="sig-name descname"><span class="pre">read_all_matching_ports</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">port_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.read_all_matching_ports"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.read_all_matching_ports" title="Permalink to this definition">¶</a></dt>
<dd><p>Query 8, Priority 2
Matches a port based on a port name or optional country, returning the port document</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>port_name</strong> (<em>str</em>) – The name of a port</p></li>
<li><p><strong>country</strong> (<em>str</em>) – Optional, the country a port is in</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the connection fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>JSON encoded port document containing the port’s Id, Name, Country, Latitude, Longitude, and
all three tile ids</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.read_ship_pos_in_ts3_given_port">
<span class="sig-name descname"><span class="pre">read_ship_pos_in_ts3_given_port</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">port_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.read_ship_pos_in_ts3_given_port"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.read_ship_pos_in_ts3_given_port" title="Permalink to this definition">¶</a></dt>
<dd><p>Query 9, Priority 2
Based on a port’s name and country, finds the ship positions in the scale 3 tile that the port is in.
If no unique port is found, list all port documents with those parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>port_name</strong> (<em>str</em>) – The name of a port</p></li>
<li><p><strong>country</strong> (<em>str</em>) – Optional, the country a port is in</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the connection fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Either a JSON string containing {‘vessels’: [{‘MMSI’: …, ‘lat’: …, ‘long’: …, ‘IMO’: …}, …]}
or a an array of objects containing the port’s Id, Name, Country, Latitude, Longitude, and all three tile
ids</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.read_vessel_information">
<span class="sig-name descname"><span class="pre">read_vessel_information</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mmsi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.read_vessel_information"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.read_vessel_information" title="Permalink to this definition">¶</a></dt>
<dd><p>Query 6, Priority 1
From a vessel’s MMSI and optional values IMO and Name, returns a vessel document matching the values given.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mmsi</strong> (<em>int</em>) – Vessel MMSI</p></li>
<li><p><strong>imo</strong> (<em>int</em>) – Optional, Vessel IMO</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Optional, A dictionary of values to insert</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the connection fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A JSON vessel document formed with create_vessel_document()</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.recent_ships_positions_headed_to_given_port">
<span class="sig-name descname"><span class="pre">recent_ships_positions_headed_to_given_port</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">port_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.recent_ships_positions_headed_to_given_port"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.recent_ships_positions_headed_to_given_port" title="Permalink to this definition">¶</a></dt>
<dd><p>Query 12, Priority 4
From given port information, return either a list of matching ports or, if there is a single matching port,
a list of vessel positions heading towards that port.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>port_name</strong> (<em>str</em>) – The name of the port</p></li>
<li><p><strong>country</strong> (<em>str</em>) – The name of the country the port is in</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the connection fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Either a JSON string containing {‘vessels’: [{‘MMSI’: …, ‘lat’: …, ‘long’: …, ‘IMO’: …}, …]}
or a an array of objects containing the port’s Id, Name, Country, Latitude, Longitude, and all three tile
ids</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.recent_ships_positions_headed_to_given_portId">
<span class="sig-name descname"><span class="pre">recent_ships_positions_headed_to_given_portId</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">port_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.recent_ships_positions_headed_to_given_portId"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.recent_ships_positions_headed_to_given_portId" title="Permalink to this definition">¶</a></dt>
<dd><p>Query 11, Priority 4
From a port id, find all most recent ship positions of the vessels heading to that port</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>port_id</strong> (<em>dict</em>) – The id of a port</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the connection fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>JSON string containing {‘vessels’: [{‘MMSI’: …, ‘lat’: …, ‘long’: …, ‘IMO’: …}, …]}</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.select_all_recent_in_tile">
<span class="sig-name descname"><span class="pre">select_all_recent_in_tile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tile_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.select_all_recent_in_tile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.select_all_recent_in_tile" title="Permalink to this definition">¶</a></dt>
<dd><p>Query 7, Priority 2
From a tile id, find all most recent ship positions of the vessels in that tile</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tile_id</strong> (<em>int</em>) – The id of a tile</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the connection fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>JSON string containing {‘vessels’: [{‘MMSI’: …, ‘lat’: …, ‘long’: …, ‘IMO’: …}, …]}</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.select_all_recent_positions">
<span class="sig-name descname"><span class="pre">select_all_recent_positions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.select_all_recent_positions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.select_all_recent_positions" title="Permalink to this definition">¶</a></dt>
<dd><p>Query 4, Priority 1
Select all recent ship positions for each vessel MMSI</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the connection fails</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A JSON list of ship documents formed from create_vessel_document(), {‘vessels’: […]}</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.select_most_recent_5_ship_positions">
<span class="sig-name descname"><span class="pre">select_most_recent_5_ship_positions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mmsi</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.select_most_recent_5_ship_positions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.select_most_recent_5_ship_positions" title="Permalink to this definition">¶</a></dt>
<dd><p>Query 10, Priority 3
From a vessel MMSI, list the 5 most recent positions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mmsi</strong> (<em>int</em>) – A vessel MMSI</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the connection fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>JSON string containing {‘MMSI’: …, ‘Positions’: [{‘lat’: …, ‘long’: …}, … ], ‘IMO’: … }</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.select_most_recent_from_mmsi">
<span class="sig-name descname"><span class="pre">select_most_recent_from_mmsi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mmsi</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/MySQL_DAO.html#MySQL_DAO.select_most_recent_from_mmsi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.select_most_recent_from_mmsi" title="Permalink to this definition">¶</a></dt>
<dd><p>Query 5, Priority 1
From an MMSI, select that vessel’s most recent position.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mmsi</strong> (<em>int</em>) – The vessel MMSI</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>[</strong><strong>BaseException</strong><strong>]</strong> – If the connection fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A JSON position document of the form {‘MMSI’: …, ‘lat’: …, ‘long’: …, ‘IMO’: …}</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="MySQL_DAO.MySQL_DAO.static_data_parameters">
<span class="sig-name descname"><span class="pre">static_data_parameters</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['CallSign',</span> <span class="pre">'Name',</span> <span class="pre">'VesselType',</span> <span class="pre">'CargoType',</span> <span class="pre">'Length',</span> <span class="pre">'Breadth',</span> <span class="pre">'Draught',</span> <span class="pre">'Destination',</span> <span class="pre">'DestinationId']</span></em><a class="headerlink" href="#MySQL_DAO.MySQL_DAO.static_data_parameters" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">CS418_Milestone_4</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">CS418_Milestone4</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">MySQL_DAO module</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_dao.html">test_dao module</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">CS418_Milestone4</a><ul>
      <li>Previous: <a href="modules.html" title="previous chapter">CS418_Milestone4</a></li>
      <li>Next: <a href="test_dao.html" title="next chapter">test_dao module</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Group 5.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.5.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/MySQL_DAO.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>